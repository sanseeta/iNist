<!DOCTYPE html>
<head>
	<title>NIST - Parent Companion</title>
	<link rel="stylesheet" href="css/icon.css">
	<link rel="stylesheet" href="css/material.indigo-pink.min.css">
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<script src="js/material.min.js"></script>
	<script src="js/jquery-2.2.4.min.js"></script>
	<style type="text/css">
		body{
			background-color: #f5f5f5; 
		}
		.wid90{
			width: 90%!important;
		}
		.page-content{
			padding: 10%!important;
   			}
   		@media screen and (max-width: 1024px){
   			.mdl-layout__header .mdl-layout__drawer-button {
		    margin: 7px!important;
			}	
   		}
   		.mdl-button{
   			margin: 10px!important;
   		}
 	</style>
 	<script type="text/javascript">
 		if(localStorage.getItem("login")=="True")
 			window.open("home.html","_self");
 	</script>
</head>

<body>
	<!-- Always shows a header, even in smaller screens. -->
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
	  <header class="mdl-layout__header">
	    <div class="mdl-layout__header-row">
	      <!-- Title -->
	      <span class="mdl-layout-title">iNIST</span>
	      <!-- Add spacer, to align navigation to the right -->
	      <div class="mdl-layout-spacer"></div>
	     </div>
	  </header>
	  <div class="mdl-layout__drawer">
	    <span class="mdl-layout-title">iNsit</span>
	    <nav class="mdl-navigation">
	      <a class="mdl-navigation__link" href="">About</a>
	    </nav>
	  </div>
	  <main class="mdl-layout__content">
	    <div class="page-content">
	    	<!-- Accent-colored raised button with ripple -->
	    	<center>
	    		<img src="img/logo.jpg"
	    		<form action="#">
				  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label wid90">
				    <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="phone">
				    <label class="mdl-textfield__label" for="phone">Your Registered Mobile Number</label>
				  </div><br/>
				  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label wid90">
				    <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="pin">
				  	<label class="mdl-textfield__label" for="roll">Your Assigned PIN</label>
				  </div>
				  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label wid90">
				    <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="roll">
				  	<label class="mdl-textfield__label" for="roll">Your Child's College Roll Number</label>
				  </div>
				</form>
				<button id="login" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored wid90">
				  Login
				</button>
				<div id="toast" class="mdl-js-snackbar mdl-snackbar">
				  <div class="mdl-snackbar__text"></div>
				  <button class="mdl-snackbar__action" type="button"></button>
				</div>
				<script type="text/javascript">
				function snack(string) {
				    var snackbarContainer = document.querySelector('#toast');
				    var data = { message: string, timeout: 2000 };
				    snackbarContainer.MaterialSnackbar.showSnackbar(data);
				}
			 		$(document).ready(function(){
					    $("#login").click(function(){
					    	snack('Checking');
					    	var url="http://trashit.hol.es/iNist/index.php?phone=" + 
					    		document.getElementById('phone').value + "&pin=" +
					     	 	document.getElementById('pin').value + "&roll=" +
					     	 	document.getElementById('roll').value;
					     	 prompt("abc",url);
					     	$.getJSON(url,function(result){
						  	   alert(result.check);
						  	   if(result.check=="True")
						  	   		{
						  	   			localStorage.setItem("login","True");
						  	   			localStorage.setItem("roll",result.roll);
						  	   			snack('Please Wait');
						  	   			window.open("home.html","_self");
						  	   		}
						  	   	else
						  	   	{
						  	   		snack('Login Failed, Invalid Details');
						  	   	}
						  });
					    });
					});
			 	</script>
	    	</center>
	    </div>
	  </main>
	</div>
</body>
</html>